# åŸºç¡€é…ç½®
mixed-port: 7890
allow-lan: true
mode: rule
log-level: silent

# 1. ä»£ç†é›†åˆ (å–ä»£åŸæœ¬çš„è®¢é˜…é“¾æ¥)
proxy-providers:
  YToo:
    type: http
    url: "https://4983c690743e.ai-163cdn.com/sub?target=clash&new_name=true&emoji=true&clash.doh=true&filename=YToo_SS&udp=false&url=https%3A%2F%2Fapi.ytoo.xyz%2Fosubscribe.php%3Fsid%3D8192%26token%3DChPNQ9ngooXT%26sip002%3D1"
    interval: 3600
    path: ./provider.yaml
    proxy: DIRECT
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
      timeout: 5000
      lazy: true
      expected-status: 204
    # èŠ‚ç‚¹é‡å‘½åå’Œè¿‡æ»¤åœ¨è¿™é‡Œå®ç°
    override: # è¦†å†™èŠ‚ç‚¹åŠ è½½æ—¶çš„ä¸€äº›é…ç½®é¡¹
      # skip-cert-verify: true
      # udp: true
      # down: "50 Mbps"
      # up: "10 Mbps"
      # dialer-proxy: proxy
      # interface-name: tailscale0
      # routing-mark: 233
      # ip-version: ipv4-prefer
      # additional-prefix: "[provider1]"
      # additional-suffix: "test"
      # # åå­—æ›¿æ¢ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼
      proxy-name:
        - pattern: "ä¸“çº¿ "
          target: ""
      #   - pattern: "IPLC-(.*?)å€"
      #     target: "iplc x $1"
  SNTP:
    type: http
    url: "https://sub1.sntp.me/baseStr?token=d7b0815fd5384c102b389b49d5c88909&sign=af128ad4479ac8a66cc2db9b33ae3eed&ts=1770744689&nonce=bb2dd0c11453cc1a721a157078869b4c&v=v2&timestamp=127420"
    interval: 3600
    proxy: Proxy
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
      timeout: 5000
      lazy: true
      expected-status: 204
    # èŠ‚ç‚¹é‡å‘½åå’Œè¿‡æ»¤åœ¨è¿™é‡Œå®ç°
    override: # è¦†å†™èŠ‚ç‚¹åŠ è½½æ—¶çš„ä¸€äº›é…ç½®é¡¹
      skip-cert-verify: true
      udp: true
      # down: "50 Mbps"
      # up: "10 Mbps"
      # dialer-proxy: proxy
      # interface-name: tailscale0
      # routing-mark: 233
      # ip-version: ipv4-prefer
      # additional-prefix: "[provider1]"
      # additional-suffix: "test"
      # # åå­—æ›¿æ¢ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼

# 2. ç­–ç•¥ç»„ (ä¿æŒä½ åŸæœ‰çš„é€»è¾‘)
proxy-groups:
  - name: Proxy
    type: select
    proxies: [ğŸ‡­ğŸ‡°HK, ğŸ‡¸ğŸ‡¬SG, ğŸ‡ºğŸ‡¸US, ğŸŒSNTP Asia, ğŸŒSNTP US]

  - name: Netflix
    type: select
    proxies: [ğŸ‡­ğŸ‡°HK, ğŸ‡¸ğŸ‡¬SG, ğŸ‡ºğŸ‡¸US, ğŸ“ºMediaSE, ğŸŒSNTP Asia]

  - name: Google
    type: select
    proxies: [ğŸ‡­ğŸ‡°HK, ğŸ‡¸ğŸ‡¬SG, ğŸ‡ºğŸ‡¸US, ğŸŒSNTP Asia]

  - name: Youtube
    type: select
    proxies: [ğŸ‡­ğŸ‡°HK, ğŸ‡¸ğŸ‡¬SG, ğŸ‡ºğŸ‡¸US, ğŸ“ºMediaSE, ğŸŒSNTP Asia]

  - name: Telegram
    type: select
    proxies: [ğŸ‡¸ğŸ‡¬SG, ğŸ‡ºğŸ‡¸US, ğŸ“ºMediaSE, ğŸŒSNTP Asia]

  - name: StreamingSE
    type: select
    proxies: [DIRECT, ğŸ‡­ğŸ‡°HK, ğŸ‡¸ğŸ‡¬SG, ğŸ‡ºğŸ‡¸US, ğŸ“ºMediaSE, ğŸŒSNTP Asia, ğŸŒSNTP US]

  - name: MyList
    type: select
    proxies: [ğŸ‡ºğŸ‡¸US, ğŸŒSNTP US]

  # --- è‡ªåŠ¨ç­›é€‰å­ç»„ ---
  - name: ğŸ‡­ğŸ‡°HK
    type: select
    use:
      - YToo
    filter: "(?=.*(æ ‡å‡† é¦™|é«˜çº§ é¦™|æ—¥ç”¨ é¦™))^((?!(æ—¥ç”¨|å°|éŸ©|æ–°|ç¾|é˜¿|å¾·|æ¸¸æˆ|æ¾³)).)*$"

  - name: ğŸ‡¸ğŸ‡¬SG
    type: select
    use:
      - YToo
    filter: "(?=.*(æ–°|ç‹®|ç…|SG-|(?i)Singapore))^((?!(æ—¥ç”¨|æ¸¯|å°|éŸ©|ç¾)).)*$"

  - name: ğŸ‡ºğŸ‡¸US
    type: fallback
    use:
      - YToo
    filter: "(?=.*(é«˜çº§ ç¾|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$"
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300
    tolerance: 150

  - name: ğŸ“ºMediaSE
    type: select
    use:
      - YToo
      - SNTP
    filter: "(?=.*(0.2x|0.20x|æ—¥ç”¨))^((?!(éŸ©|é˜¿|å¾·|DE|æ¸¸æˆ|æ¾³|ç‰¹æ®Š|è´­ç‰©|Ukraine|Malaysia|Nigeria|Pakistan|KR|TR)).)*$"

  - name: ğŸŒSNTP Asia
    type: select
    use:
      - SNTP
    filter: "(?=.*(2.00x))^((?!(æ—¥ç”¨|æ ‡å‡†|é«˜çº§|ç‰¹æ®Š|è´­ç‰©)).)*$"

  - name: ğŸŒSNTP US
    type: select
    use:
      - SNTP
    filter: "(?=.*(US))^((?!(HK|SG|æ—¥ç”¨|æ ‡å‡†|é«˜çº§|ç‰¹æ®Š|è´­ç‰©)).)*$"

# 3. è§„åˆ™é›† (ä¿æŒä½ åŸæœ‰çš„è§„åˆ™è·¯å¾„)
rule-providers:
  REJECT:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/REJECT.list"
    path: ./ruleset/REJECT.list
    format: text
    proxy: Proxy
  AppleCN:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/AppleCN.list"
    path: ./ruleset/AppleCN.list
    format: text
    proxy: Proxy
  JD:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/rule_script/refs/heads/master/rule/Clash/JingDong/JingDong.list"
    path: ./ruleset/JingDong.list
    format: text
    proxy: Proxy
  Tencent:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/rule_script/refs/heads/master/rule/Clash/Tencent/Tencent.list"
    path: ./ruleset/Tencent.list
    format: text
    proxy: Proxy
  Alibaba:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/rule_script/refs/heads/master/rule/Clash/Alibaba/Alibaba.list"
    path: ./ruleset/Alibaba.list
    format: text
    proxy: Proxy
  Download:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/rule_script/refs/heads/master/rule/Clash/Download/Download.list"
    path: ./ruleset/Download.list
    format: text
    proxy: Proxy
  Direct:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/DIRECT.list"
    path: ./ruleset/DIRECT.list
    format: text
    proxy: Proxy

  Youtube:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/Youtube.list"
    path: ./ruleset/Youtube.list
    format: text
    proxy: Proxy
  Google:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/Google.list"
    path: ./ruleset/Google.list
    format: text
    proxy: Proxy
  Gemini:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/Gemini.list"
    path: ./ruleset/Gemini.list
    format: text
    proxy: Proxy
  Telegram:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/Telegram.list"
    path: ./ruleset/Telegram.list
    format: text
    proxy: Proxy

  Reddit:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/rule_script/refs/heads/master/rule/Clash/Reddit/Reddit.list"
    path: ./ruleset/Reddit.list
    format: text
    proxy: Proxy
  USAProxies:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/USAProxies.list"
    path: ./ruleset/USAProxies.list
    format: text
    proxy: Proxy
  GitHub:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/rule_script/refs/heads/master/rule/Clash/GitHub/GitHub.list"
    path: ./ruleset/GitHub.list
    format: text
    proxy: Proxy
  OneDrive:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/OneDrive.list"
    path: ./ruleset/OneDrive.list
    format: text
    proxy: Proxy
  Microsoft:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/Microsoft.list"
    path: ./ruleset/Microsoft.list
    format: text
    proxy: Proxy
  StreamingSE:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/StreamingSE.list"
    path: ./ruleset/StreamingSE.list
    format: text
    proxy: Proxy
  Netflix:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/Netflix.list"
    path: ./ruleset/Netflix.list
    format: text
    proxy: Proxy
  ProxyMedia:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/ProxyMedia.list"
    path: ./ruleset/ProxyMedia.list
    format: text
    proxy: Proxy
  ProxyList:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/Clash.rules/refs/heads/main/Rulesets/Proxylist.list"
    path: ./ruleset/Proxylist.list
    format: text
    proxy: Proxy
  ProxyLite:
    behavior: classical
    interval: 600
    type: http
    url: "https://raw.githubusercontent.com/tceasy/rule_script/refs/heads/master/rule/Clash/ProxyLite/ProxyLite.list"
    path: ./ruleset/ProxyLite.list
    format: text
    proxy: Proxy

rules:
  - RULE-SET,REJECT,REJECT
  - GEOIP,LAN,DIRECT
  - RULE-SET,AppleCN,DIRECT
  - RULE-SET,JD,DIRECT
  - RULE-SET,Tencent,DIRECT
  - RULE-SET,Alibaba,DIRECT
  - RULE-SET,Download,DIRECT
  - RULE-SET,Direct,DIRECT
  - RULE-SET,Youtube,Youtube
  - RULE-SET,Google,Google
  - RULE-SET,Gemini,Google
  - RULE-SET,Telegram,Telegram
  - RULE-SET,Reddit,MyList
  - RULE-SET,USAProxies,MyList
  - RULE-SET,GitHub,Proxy
  - RULE-SET,OneDrive,Proxy
  - RULE-SET,Microsoft,Proxy
  - RULE-SET,StreamingSE,StreamingSE
  - RULE-SET,Netflix,Netflix
  - RULE-SET,ProxyMedia,Youtube
  - RULE-SET,ProxyList,Proxy
  - RULE-SET,ProxyLite,Proxy
  - GEOSITE,CN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Proxy
